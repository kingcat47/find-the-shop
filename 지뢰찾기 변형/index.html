<!DOCTYPE html>
<html lang="ko">
  <head>
    <style>
      * {
        text-align: center;
      }

      #board {
        margin-left: auto;
        margin-right: auto;
      }
      /* ì´ëª¨í‹°ì½˜ì„ ë„£ìœ¼ë©´ ì…€ ë¹„ìœ¨ì´ ê¹¨ì ¸ì„œ ë‚´ê°€ ì¡°ì •í–ˆë‹¤ */
      #board tr td {
        border: 1px solid white;
        background: #34da79;
        width: 40px; /* ì…€ í¬ê¸° ê³ ì • */
        height: 40px;
        text-align: center;
        font-size: 0; /* ê¸°ë³¸ í…ìŠ¤íŠ¸ í¬ê¸° ìˆ¨ê¸°ê¸° */
      }

      #board tr td.clicked {
        background: #6c5ee7;
      }
      /* ì´ëª¨í‹°ì½˜ì„ ë„£ìœ¼ë©´ ì…€ ë¹„ìœ¨ì´ ê¹¨ì ¸ì„œ ë‚´ê°€ ì¡°ì •í–ˆë‹¤ */
      #board tr td.mine,
      #board tr td.clim,
      #board tr td.moneyevent {
        font-size: 20px; /* ì´ëª¨í‹°ì½˜ í¬ê¸° ì¡°ì • */
      }
      /* ìƒì ìƒ‰ê¹” */
      #board tr td.mine {
        background: #e1ff00;
      }
      /* ì½”ì¸ìƒ‰ê¹” */
      #board tr td.moneyevent {
        background: #6c5ee7;
      }
      /* í­íƒ„ìƒ‰ê¹” */
      #board tr td.clim {
        background: #ff0000;
      }
    </style>
  </head>
  <body>
    <h1>í¸ì˜ì  ì°¾ê¸°</h1>
    <div>ê¸ˆì•¡: <span id="money">10000</span></div>
    <table id="board"></table>
    <button onclick="genGrid();">ìƒˆë¡œìš´ ê²Œì„</button>
    <script>
      let grid = document.getElementById("board");
      genGrid();

      function genGrid() {
        grid.innerHTML = "";
        for (let i = 0; i < 8; i++) {
          let row = grid.insertRow(i);
          for (let j = 0; j < 8; j++) {
            let cell = row.insertCell(j);
            cell.onclick = function () {
              clickBox(this);
            };
            let mine = document.createAttribute("mine");
            let monetevent = document.createAttribute("monetevent");
            // ì§€ë¢°ì„¤ì •ì½”ë“œë¥¼ ì½”ì¸ì´ëƒ í­íƒ„ì´ëƒì½”ë“œë¡œë°”ê¿ˆ
            if (Math.random() < 0.3) {
              monetevent.value = "true";
            } else {
              monetevent.value = "false";
            }
            cell.setAttributeNode(mine);
            cell.setAttributeNode(monetevent);
          }
        }

        // ë¬´ì‘ìœ„ë¡œ í•œ ì…€ì„ ì„ íƒí•˜ì—¬ ì§€ë¢°ë¡œ ì„¤ì •
        let randomRow = Math.floor(Math.random() * 8);
        let randomCol = Math.floor(Math.random() * 8);
        let randomshop = grid.rows[randomRow].cells[randomCol];
        randomshop.setAttribute("mine", "true");
      }

      function clickBox(cell) {
        let money = document.getElementById("money");
        let moneyValue = parseInt(money.innerHTML); // ê¸ˆì•¡ì„ ìˆ«ìë¡œ ë³€í™˜

        if (cell.getAttribute("mine") == "true") {
          //ìƒì ì´ë¼ë©´
          cell.className = "mine";
          cell.innerHTML = "ğŸ ";
          if (moneyValue >= 1000) {
            //ëˆì´ ì²œì›ì´ìƒì´ë¼ë©´
            money.innerHTML = moneyValue - 1000; // ê¸ˆì•¡ ê°ì†Œ
            alert("í¸ì˜ì  ë°œê²¬! ë¬´ì‚¬íˆ ë¼ë©´ì„ êµ¬ì…í–ˆìŠµë‹ˆë‹¤.");
          } else {
            alert("ì‹¤íŒ¨ ã…œã…œ ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤ã…‹.");
          }
        } else {
          if (cell.getAttribute("monetevent") == "true") {
            cell.className = "moneyevent";
            cell.innerHTML = "ğŸª™"; // ëˆ ì´ë²¤íŠ¸ ì…€ì— ì´ëª¨í‹°ì½˜ ì‚½ì…
            money.innerHTML = moneyValue + 300; // ê¸ˆì•¡ ì¦ê°€
          } else {
            cell.className = "clim";
            cell.innerHTML = "ğŸ’£"; //í­íƒ„ ì´ì½”í‹°ì½˜ ì‚½ì…
            if (moneyValue > 0) {
              money.innerHTML = moneyValue - 1000; // ê¸ˆì•¡ ê°ì†Œ
            }
          }
        }
      }
    </script>
  </body>
</html>
